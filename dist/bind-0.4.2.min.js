"use strict";!function(){function e(e){return!!e&&e.constructor===Object}function n(e){for(var n=e.ownerDocument.createDocumentFragment();e.firstChild;)n.appendChild(e.firstChild);return n}function r(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function t(e,t,d){if(!e||!e.nodeType)throw"bind.js: No DOM element was passed to 'bind'!";var u=d?d(t,e):t;if(!u)return e;var a=o(e,t,d);return a.count>0&&r(e).appendChild(n(a.clone.cloneNode(!0))),i(e,u)}function o(e,n,r){for(var t,o=-1,i=0;i<f.length;i++)if(f[i].elem==e){if(f[i].model!=n&&r)throw"bind.js: Element is already bound to a different model";o=i;break}return-1==o?(t={elem:e,clone:e.cloneNode(!0),count:0},f.push(t),r&&e.addEventListener&&e.addEventListener("change",function(e){for(var r=e.target,o=r.getAttribute("name");r.parentNode!=document.body;){if(r.model&&o in r.model){r.model[o]=d(e.target);break}r=r.parentNode}t.modelRep=JSON.stringify(n)})):(t=f[o],t.count+=1),t.model=n,t.mapper=r,t}function i(n,r){if(!e(r))return u(n,r);var t;for(var o in r){var d=r[o],s=Math.max(o.indexOf("@"),o.indexOf("&")),c=-1==s?o:o.substring(0,s),f="."==c||""==c?[n]:n.querySelectorAll(c),m=f.length;if(0!=m)if(Array.isArray(f)||(f=Array.prototype.slice.call(f,0)),-1!=s){var p=o.substring(s+1);switch(o[s]){case"@":for(t=0;m>t;t++)a(f[t],p,d);break;case"&":for(t=0;m>t;t++)l(f[t],p,d);break;default:console.error("No case for '"+o[s]+"'")}}else if(e(d))for(t=0;m>t;t++)i(f[t],d);else if(Array.isArray(d))for(t=0;m>t;t++){for(var v=f[t],y=0;y<d.length;y++){var b=v.parentNode.insertBefore(v.cloneNode(!0),v);i(b,d[y])}v.parentNode.removeChild(v)}else for(t=0;m>t;t++)u(f[t],d)}return n}function d(e){if(!("value"in e))return null;var n=e.type;switch(e.constructor==HTMLSelectElement&&(n="select"),e.constructor==HTMLTextAreaElement&&(n="textarea"),n){case"checkbox":return e.checked;default:return e.value}}function u(n,r){return n&&void 0!==r?(r instanceof Function&&(r=r()),r==t.YES?n:r===t.NO?n.parentNode.removeChild(n):(n.innerHTML=e(r)?r.toString():Array.isArray(r)?r.toString():r,n)):null}function a(n,r,o){return n&&void 0!==o?c[r]?n.addEventListener(r.substring(2),o):(o instanceof Function&&(o=o()),o==t.YES?n:(o==t.NO?n.removeAttribute(r):e(o)?n.setAttribute(r,o.toString()):Array.isArray(o)?n.setAttribute(r,o.toString()):n.setAttribute(r,o),n)):null}function l(n,r,o){return n&&void 0!==o?(o instanceof Function&&(o=o()),o==t.YES?n:(o==t.NO?delete n[r]:n[r]=e(o)?o:Array.isArray(o)?o:o,n)):null}function s(){for(var e=0;e<f.length;e++){var n=f[e];n.modelRep!=JSON.stringify(n.model)&&t(n.elem,n.model,n.mapper)}}var c={onblur:!0,onchange:!0,onclick:!0,ondblclick:!0,onenter:!0,onfocus:!0,oninput:!0,onkeypress:!0,onkeydown:!0,onkeyup:!0,onleave:!0,onmousedown:!0,onmouseup:!0,onmousemove:!0,onmouseleave:!0},f=[];t.NO="bind.NO",t.YES="bind.YES",t.YN=function(e){return e?t.YES:t.NO},t.digest=s,"undefined"!=typeof window&&window.setInterval(s,200),"undefined"!=typeof window&&(window.bind=t),"undefined"!=typeof module&&(module.exports=t)}("undefined"==typeof exports?this.bind={}:exports);